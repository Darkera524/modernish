#! /usr/bin/env modernish
#! use safe -w BUG_UPP -w BUG_APPENDC
#! use loop/with

quotelevel=${1:-4}

quotestring=${2:-"hi there,
let's check	hôw this prógram
handles 'quoting' of weird multi#line *strings*.
(To try another string, specify a level of quoting
and a string as arguments on the command line.)"}

with q=1 to $quotelevel; do
	shellquote quotestring
	print "--- quoting level $q ---" $quotestring ''
done

with q=$quotelevel to 1; do
	print "unquoting level $q..."
	eval quotestring=$quotestring || exit
done

print '' '--- unquoted ---' $quotestring
